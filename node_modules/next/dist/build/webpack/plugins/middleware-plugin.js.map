{"version":3,"sources":["../../../../src/build/webpack/plugins/middleware-plugin.ts"],"names":["MiddlewarePlugin","SUPPORTED_NATIVE_MODULES","getEdgePolyfilledModules","handleWebpackExternalForEdgeRuntime","NAME","isUsingIndirectEvalAndUsedByExports","args","moduleGraph","runtime","module","usingIndirectEval","wp","exportsInfo","getExportsInfo","exportName","getUsed","UsageState","Unused","getEntryFiles","entryFiles","meta","opts","files","edgeSSR","isServerComponent","push","SERVER_REFERENCE_MANIFEST","CLIENT_REFERENCE_MANIFEST","FLIGHT_SERVER_CSS_MANIFEST","sriEnabled","SUBRESOURCE_INTEGRITY_MANIFEST","filter","file","startsWith","endsWith","map","replace","NEXT_CLIENT_SSR_ENTRY_SUFFIX","MIDDLEWARE_BUILD_MANIFEST","MIDDLEWARE_REACT_LOADABLE_MANIFEST","NEXT_FONT_MANIFEST","NextBuildContext","hasInstrumentationHook","INSTRUMENTATION_HOOK_FILENAME","getCreateAssets","params","compilation","metadataByEntry","assets","middlewareManifest","sortedMiddleware","middleware","functions","version","entrypoint","entrypoints","values","metadata","name","get","page","edgeMiddleware","edgeApiFunction","matcherSource","isAppDir","normalizeAppPath","catchAll","namedRegex","getNamedMiddlewareRegex","matchers","regexp","originalSource","edgeFunctionDefinition","env","Array","from","getFiles","wasm","wasmBindings","filePath","assetBindings","regions","getSortedRoutes","Object","keys","MIDDLEWARE_MANIFEST","sources","RawSource","JSON","stringify","buildWebpackError","message","loc","entryModule","parser","error","compiler","webpack","WebpackError","state","current","isInMiddlewareLayer","layer","isProcessEnvMemberExpression","memberExpression","object","type","property","value","isNodeJsModule","moduleName","require","builtinModules","includes","isDynamicCodeEvaluationAllowed","fileName","edgeFunctionConfig","rootDir","isMatch","unstable_allowDynamicGlobs","buildUnsupportedApiError","apiName","rest","start","line","registerUnsupportedApiHooks","expression","EDGE_UNSUPPORTED_NODE_APIS","warnForUnsupportedApi","node","warnings","hooks","call","for","tap","callMemberChain","expressionMemberChain","warnForUnsupportedProcessApi","callee","getCodeAnalyzer","dev","handleExpression","optimize","InnerGraph","onUsage","used","buildInfo","getModuleBuildInfo","Set","handleWrapExpression","expr","ConstDependency","dependencies","dep1","range","addPresentationalDependency","dep2","handleWrapWasmCompileExpression","handleWrapWasmInstantiateExpression","addUsedEnvVar","envVarName","nextUsedEnvVars","undefined","add","handleCallMemberChain","_","members","length","handleImport","source","importLocByPath","Map","importedModule","toString","set","sourcePosition","identifier","sourceContent","skip","prefix","new","importCall","import","declarator","init","id","properties","key","findEntryEdgeFunctionConfig","entryDependency","resolver","request","absolutePagePath","URL","searchParams","pageFilePath","Promise","resolve","err","path","config","getPageStaticInfo","nextConfig","isDev","pageType","getExtractMetadata","clear","resolverFactory","telemetry","traceGlobals","entryName","entry","entries","options","EDGE_RUNTIME_WEBPACK","route","getResolvedModule","modules","addEntriesFromDependency","dependency","getModule","forEach","includeDependencies","entryMetadata","ogImageGenerationCount","resource","hasOGImageGeneration","test","util","getEntryRuntime","record","eventName","payload","fileWithDynamicCode","userRequest","errors","join","preferredRegion","nextEdgeSSR","nextEdgeMiddleware","nextEdgeApiFunction","envName","nextWasmMiddlewareBinding","nextAssetMiddlewareBinding","conn","getOutgoingConnections","EVENT_BUILD_FEATURE_USAGE","featureName","invocationCount","constructor","apply","normalModuleFactory","codeAnalyzer","finishModules","tapPromise","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS","supportedEdgePolyfills","records","mod","context","contextInfo","getResolve","issuerLayer","has"],"mappings":"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"}