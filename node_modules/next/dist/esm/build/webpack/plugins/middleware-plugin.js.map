{"version":3,"sources":["../../../../src/build/webpack/plugins/middleware-plugin.ts"],"names":["getNamedMiddlewareRegex","getModuleBuildInfo","getSortedRoutes","webpack","sources","isMatch","EDGE_RUNTIME_WEBPACK","EDGE_UNSUPPORTED_NODE_APIS","MIDDLEWARE_BUILD_MANIFEST","CLIENT_REFERENCE_MANIFEST","MIDDLEWARE_MANIFEST","MIDDLEWARE_REACT_LOADABLE_MANIFEST","NEXT_CLIENT_SSR_ENTRY_SUFFIX","FLIGHT_SERVER_CSS_MANIFEST","SUBRESOURCE_INTEGRITY_MANIFEST","NEXT_FONT_MANIFEST","SERVER_REFERENCE_MANIFEST","getPageStaticInfo","traceGlobals","EVENT_BUILD_FEATURE_USAGE","normalizeAppPath","INSTRUMENTATION_HOOK_FILENAME","NextBuildContext","NAME","isUsingIndirectEvalAndUsedByExports","args","moduleGraph","runtime","module","usingIndirectEval","wp","exportsInfo","getExportsInfo","exportName","getUsed","UsageState","Unused","getEntryFiles","entryFiles","meta","opts","files","edgeSSR","isServerComponent","push","sriEnabled","filter","file","startsWith","endsWith","map","replace","hasInstrumentationHook","getCreateAssets","params","compilation","metadataByEntry","assets","middlewareManifest","sortedMiddleware","middleware","functions","version","entrypoint","entrypoints","values","metadata","name","get","page","edgeMiddleware","edgeApiFunction","matcherSource","isAppDir","catchAll","namedRegex","matchers","regexp","originalSource","edgeFunctionDefinition","env","Array","from","getFiles","wasm","wasmBindings","filePath","assetBindings","regions","Object","keys","RawSource","JSON","stringify","buildWebpackError","message","loc","entryModule","parser","error","compiler","WebpackError","state","current","isInMiddlewareLayer","layer","isProcessEnvMemberExpression","memberExpression","object","type","property","value","isNodeJsModule","moduleName","require","builtinModules","includes","isDynamicCodeEvaluationAllowed","fileName","edgeFunctionConfig","rootDir","unstable_allowDynamicGlobs","buildUnsupportedApiError","apiName","rest","start","line","registerUnsupportedApiHooks","expression","warnForUnsupportedApi","node","warnings","hooks","call","for","tap","callMemberChain","expressionMemberChain","warnForUnsupportedProcessApi","callee","getCodeAnalyzer","dev","handleExpression","optimize","InnerGraph","onUsage","used","buildInfo","Set","handleWrapExpression","expr","ConstDependency","dependencies","dep1","range","addPresentationalDependency","dep2","handleWrapWasmCompileExpression","handleWrapWasmInstantiateExpression","addUsedEnvVar","envVarName","nextUsedEnvVars","undefined","add","handleCallMemberChain","_","members","length","handleImport","source","importLocByPath","Map","importedModule","toString","set","sourcePosition","identifier","sourceContent","skip","prefix","new","importCall","import","declarator","init","id","properties","key","findEntryEdgeFunctionConfig","entryDependency","resolver","request","absolutePagePath","URL","searchParams","pageFilePath","Promise","resolve","err","path","config","nextConfig","isDev","pageType","getExtractMetadata","clear","resolverFactory","telemetry","entryName","entry","entries","options","route","getResolvedModule","modules","addEntriesFromDependency","dependency","getModule","forEach","includeDependencies","entryMetadata","ogImageGenerationCount","resource","hasOGImageGeneration","test","util","getEntryRuntime","record","eventName","payload","fileWithDynamicCode","userRequest","errors","join","preferredRegion","nextEdgeSSR","nextEdgeMiddleware","nextEdgeApiFunction","envName","nextWasmMiddlewareBinding","nextAssetMiddlewareBinding","conn","getOutgoingConnections","featureName","invocationCount","MiddlewarePlugin","constructor","apply","normalModuleFactory","codeAnalyzer","finishModules","tapPromise","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS","SUPPORTED_NATIVE_MODULES","supportedEdgePolyfills","getEdgePolyfilledModules","records","mod","handleWebpackExternalForEdgeRuntime","context","contextInfo","getResolve","issuerLayer","has"],"mappings":"AAMA,SAASA,uBAAuB,QAAQ,+CAA8C;AACtF,SAASC,kBAAkB,QAAQ,mCAAkC;AACrE,SAASC,eAAe,QAAQ,mCAAkC;AAClE,SAASC,OAAO,EAAEC,OAAO,QAAQ,qCAAoC;AACrE,SAASC,OAAO,QAAQ,gCAA+B;AACvD,SACEC,oBAAoB,EACpBC,0BAA0B,EAC1BC,yBAAyB,EACzBC,yBAAyB,EACzBC,mBAAmB,EACnBC,kCAAkC,EAClCC,4BAA4B,EAC5BC,0BAA0B,EAC1BC,8BAA8B,EAC9BC,kBAAkB,EAClBC,yBAAyB,QACpB,gCAA+B;AACtC,SACEC,iBAAiB,QAEZ,sCAAqC;AAE5C,SAASC,YAAY,QAAQ,wBAAuB;AACpD,SAASC,yBAAyB,QAAQ,4BAA2B;AACrE,SAASC,gBAAgB,QAAQ,6CAA4C;AAC7E,SAASC,6BAA6B,QAAQ,yBAAwB;AACtE,SAASC,gBAAgB,QAAQ,sBAAqB;AA8BtD,MAAMC,OAAO;AAEb;;;;CAIC,GACD,SAASC,oCAAoCC,IAM5C,EAAW;IACV,MAAM,EAAEC,YAAW,EAAEC,QAAO,EAAEC,OAAM,EAAEC,kBAAiB,EAAEC,GAAE,EAAE,GAAGL;IAChE,IAAI,OAAOI,sBAAsB,WAAW;QAC1C,OAAOA;IACT,CAAC;IAED,MAAME,cAAcL,YAAYM,cAAc,CAACJ;IAC/C,KAAK,MAAMK,cAAcJ,kBAAmB;QAC1C,IAAIE,YAAYG,OAAO,CAACD,YAAYN,aAAaG,GAAGK,UAAU,CAACC,MAAM,EAAE;YACrE,OAAO,IAAI;QACb,CAAC;IACH;IAEA,OAAO,KAAK;AACd;AAEA,SAASC,cACPC,UAAoB,EACpBC,IAAmB,EACnBC,IAEC,EACD;IACA,MAAMC,QAAkB,EAAE;IAC1B,IAAIF,KAAKG,OAAO,EAAE;QAChB,IAAIH,KAAKG,OAAO,CAACC,iBAAiB,EAAE;YAClCF,MAAMG,IAAI,CAAC,CAAC,OAAO,EAAE5B,0BAA0B,GAAG,CAAC;YACnDyB,MAAMG,IAAI,CAAC,CAAC,OAAO,EAAEnC,0BAA0B,GAAG,CAAC;YACnDgC,MAAMG,IAAI,CAAC,CAAC,OAAO,EAAE/B,2BAA2B,GAAG,CAAC;YACpD,IAAI2B,KAAKK,UAAU,EAAE;gBACnBJ,MAAMG,IAAI,CAAC,CAAC,OAAO,EAAE9B,+BAA+B,GAAG,CAAC;YAC1D,CAAC;YACD2B,MAAMG,IAAI,IACLN,WACAQ,MAAM,CACL,CAACC,OACCA,KAAKC,UAAU,CAAC,aAAa,CAACD,KAAKE,QAAQ,CAAC,mBAE/CC,GAAG,CACF,CAACH,OACC,YACA,0CAA0C;gBAC1CA,KAAKI,OAAO,CAAC,OAAOvC,+BAA+B;QAG7D,CAAC;QAED6B,MAAMG,IAAI,CACR,CAAC,OAAO,EAAEpC,0BAA0B,GAAG,CAAC,EACxC,CAAC,OAAO,EAAEG,mCAAmC,GAAG,CAAC;QAGnD8B,MAAMG,IAAI,CAAC,CAAC,OAAO,EAAE7B,mBAAmB,GAAG,CAAC;IAC9C,CAAC;IAED,IAAIO,iBAAkB8B,sBAAsB,EAAE;QAC5CX,MAAMG,IAAI,CAAC,CAAC,YAAY,EAAEvB,8BAA8B,GAAG,CAAC;IAC9D,CAAC;IAEDoB,MAAMG,IAAI,IACLN,WACAQ,MAAM,CAAC,CAACC,OAAS,CAACA,KAAKE,QAAQ,CAAC,mBAChCC,GAAG,CAAC,CAACH,OAAS,YAAYA;IAE/B,OAAON;AACT;AAEA,SAASY,gBAAgBC,MAMxB,EAAE;IACD,MAAM,EAAEC,YAAW,EAAEC,gBAAe,EAAEhB,KAAI,EAAE,GAAGc;IAC/C,OAAO,CAACG,SAAgB;QACtB,MAAMC,qBAAyC;YAC7CC,kBAAkB,EAAE;YACpBC,YAAY,CAAC;YACbC,WAAW,CAAC;YACZC,SAAS;QACX;QACA,KAAK,MAAMC,cAAcR,YAAYS,WAAW,CAACC,MAAM,GAAI;gBAQvDC,0BACAA,mBACAA,2BAKoBA,oBASLA;YAvBjB,IAAI,CAACH,WAAWI,IAAI,EAAE;gBACpB,QAAQ;YACV,CAAC;YAED,sDAAsD;YACtD,MAAMD,WAAWV,gBAAgBY,GAAG,CAACL,WAAWI,IAAI;YACpD,MAAME,OACJH,CAAAA,mBAAAA,KAAAA,IAAAA,CAAAA,2BAAAA,SAAUI,cAAc,YAAxBJ,KAAAA,IAAAA,yBAA0BG,IAAF,AAAD,KACvBH,CAAAA,mBAAAA,KAAAA,IAAAA,CAAAA,oBAAAA,SAAUxB,OAAO,YAAjBwB,KAAAA,IAAAA,kBAAmBG,IAAF,AAAD,KAChBH,CAAAA,mBAAAA,KAAAA,IAAAA,CAAAA,4BAAAA,SAAUK,eAAe,YAAzBL,KAAAA,IAAAA,0BAA2BG,IAAF,AAAD;YAC1B,IAAI,CAACA,MAAM;gBACT,QAAQ;YACV,CAAC;YAED,MAAMG,gBAAgBN,CAAAA,CAAAA,qBAAAA,SAASxB,OAAO,YAAhBwB,KAAAA,IAAAA,mBAAkBO,QAAQ,AAAD,IAC3CrD,iBAAiBiD,QACjBA,IAAI;YAER,MAAMK,WAAW,CAACR,SAASxB,OAAO,IAAI,CAACwB,SAASK,eAAe;YAE/D,MAAM,EAAEI,WAAU,EAAE,GAAG3E,wBAAwBwE,eAAe;gBAC5DE;YACF;YACA,MAAME,WAAWV,CAAAA,mBAAAA,KAAAA,IAAAA,CAAAA,4BAAAA,SAAUI,cAAc,YAAxBJ,KAAAA,IAAAA,0BAA0BU,QAAF,AAAD,KAAe;gBACrD;oBACEC,QAAQF;oBACRG,gBAAgBT,SAAS,OAAOK,WAAW,YAAYF,aAAa;gBACtE;aACD;YAED,MAAMO,yBAAiD;gBACrDC,KAAKC,MAAMC,IAAI,CAAChB,SAASc,GAAG;gBAC5BvC,OAAOJ,cAAc0B,WAAWoB,QAAQ,IAAIjB,UAAU1B;gBACtD2B,MAAMJ,WAAWI,IAAI;gBACrBE,MAAMA;gBACNO;gBACAQ,MAAMH,MAAMC,IAAI,CAAChB,SAASmB,YAAY,EAAE,CAAC,CAAClB,MAAMmB,SAAS,GAAM,CAAA;wBAC7DnB;wBACAmB;oBACF,CAAA;gBACA7B,QAAQwB,MAAMC,IAAI,CAAChB,SAASqB,aAAa,EAAE,CAAC,CAACpB,MAAMmB,SAAS,GAAM,CAAA;wBAChEnB;wBACAmB;oBACF,CAAA;gBACA,GAAIpB,SAASsB,OAAO,IAAI;oBAAEA,SAAStB,SAASsB,OAAO;gBAAC,CAAC;YACvD;YAEA,IAAItB,SAASK,eAAe,IAAIL,SAASxB,OAAO,EAAE;gBAChDgB,mBAAmBG,SAAS,CAACQ,KAAK,GAAGU;YACvC,OAAO;gBACLrB,mBAAmBE,UAAU,CAACS,KAAK,GAAGU;YACxC,CAAC;QACH;QAEArB,mBAAmBC,gBAAgB,GAAGzD,gBACpCuF,OAAOC,IAAI,CAAChC,mBAAmBE,UAAU;QAG3CH,MAAM,CAAC/C,oBAAoB,GAAG,IAAIN,QAAQuF,SAAS,CACjDC,KAAKC,SAAS,CAACnC,oBAAoB,IAAI,EAAE;IAE7C;AACF;AAEA,SAASoC,kBAAkB,EACzBC,QAAO,EACPC,IAAG,EACHzC,YAAW,EACX0C,YAAW,EACXC,OAAM,EAOP,EAAE;IACD,MAAMC,QAAQ,IAAI5C,YAAY6C,QAAQ,CAACjG,OAAO,CAACkG,YAAY,CAACN;IAC5DI,MAAMhC,IAAI,GAAG5C;IACb,MAAMK,SAASqE,gBAAeC,iBAAAA,KAAAA,IAAAA,OAAQI,KAAK,CAACC,OAAO;IACnD,IAAI3E,QAAQ;QACVuE,MAAMvE,MAAM,GAAGA;IACjB,CAAC;IACDuE,MAAMH,GAAG,GAAGA;IACZ,OAAOG;AACT;AAEA,SAASK,oBAAoBN,MAA2C,EAAE;QACjEA;IAAP,OAAOA,CAAAA,CAAAA,uBAAAA,OAAOI,KAAK,CAAC1E,MAAM,YAAnBsE,KAAAA,IAAAA,qBAAqBO,KAAK,AAAD,MAAM;AACxC;AAEA,SAASC,6BAA6BC,gBAAqB,EAAW;QAElEA,0BAEEA,4BAECA;IALL,OACEA,CAAAA,CAAAA,2BAAAA,iBAAiBC,MAAM,YAAvBD,KAAAA,IAAAA,yBAAyBE,IAAI,AAAD,MAAM,gBAClCF,iBAAiBC,MAAM,CAACzC,IAAI,KAAK,aAChC,CAAA,AAACwC,CAAAA,CAAAA,6BAAAA,iBAAiBG,QAAQ,YAAzBH,KAAAA,IAAAA,2BAA2BE,IAAI,AAAD,MAAM,aACpCF,iBAAiBG,QAAQ,CAACC,KAAK,KAAK,SACnCJ,CAAAA,CAAAA,8BAAAA,iBAAiBG,QAAQ,YAAzBH,KAAAA,IAAAA,4BAA2BE,IAAI,AAAD,MAAM,gBACnCF,iBAAiBG,QAAQ,CAAC3C,IAAI,KAAK,KAAK;AAEhD;AAEA,SAAS6C,eAAeC,UAAkB,EAAE;IAC1C,OAAOC,QAAQ,UAAUC,cAAc,CAACC,QAAQ,CAACH;AACnD;AAEA,SAASI,+BACPC,QAAgB,EAChBC,kBAA8C,EAC9CC,OAAgB,EAChB;IACA,MAAMrD,OAAOmD,SAASnE,OAAO,CAACqE,WAAW,IAAI;IAC7C,OAAOnH,QAAQ8D,MAAMoD,CAAAA,6BAAAA,KAAAA,IAAAA,mBAAoBE,0BAA0B,AAAD,KAAK,EAAE;AAC3E;AAEA,SAASC,yBAAyB,EAChCC,QAAO,EACP3B,IAAG,EACH,GAAG4B,MAMJ,EAAE;IACD,OAAO9B,kBAAkB;QACvBC,SAAS,CAAC,uBAAuB,EAAE4B,QAAQ,UAAU,EAAE3B,IAAI6B,KAAK,CAACC,IAAI,CAAC;8DACZ,CAAC;QAC3D9B;QACA,GAAG4B,IAAI;IACT;AACF;AAEA,SAASG,4BACP7B,MAA2C,EAC3C3C,WAAgC,EAChC;IACA,KAAK,MAAMyE,cAAczH,2BAA4B;QACnD,MAAM0H,wBAAwB,CAACC,OAAc;YAC3C,IAAI,CAAC1B,oBAAoBN,SAAS;gBAChC;YACF,CAAC;YACD3C,YAAY4E,QAAQ,CAACvF,IAAI,CACvB8E,yBAAyB;gBACvBnE;gBACA2C;gBACAyB,SAASK;gBACT,GAAGE,IAAI;YACT;YAEF,OAAO,IAAI;QACb;QACAhC,OAAOkC,KAAK,CAACC,IAAI,CAACC,GAAG,CAACN,YAAYO,GAAG,CAAChH,MAAM0G;QAC5C/B,OAAOkC,KAAK,CAACJ,UAAU,CAACM,GAAG,CAACN,YAAYO,GAAG,CAAChH,MAAM0G;QAClD/B,OAAOkC,KAAK,CAACI,eAAe,CACzBF,GAAG,CAACN,YACJO,GAAG,CAAChH,MAAM0G;QACb/B,OAAOkC,KAAK,CAACK,qBAAqB,CAC/BH,GAAG,CAACN,YACJO,GAAG,CAAChH,MAAM0G;IACf;IAEA,MAAMS,+BAA+B,CAACR,MAAW,CAACS,OAAiB,GAAK;QACtE,IAAI,CAACnC,oBAAoBN,WAAWyC,WAAW,OAAO;YACpD;QACF,CAAC;QACDpF,YAAY4E,QAAQ,CAACvF,IAAI,CACvB8E,yBAAyB;YACvBnE;YACA2C;YACAyB,SAAS,CAAC,QAAQ,EAAEgB,OAAO,CAAC;YAC5B,GAAGT,IAAI;QACT;QAEF,OAAO,IAAI;IACb;IAEAhC,OAAOkC,KAAK,CAACI,eAAe,CACzBF,GAAG,CAAC,WACJC,GAAG,CAAChH,MAAMmH;IACbxC,OAAOkC,KAAK,CAACK,qBAAqB,CAC/BH,GAAG,CAAC,WACJC,GAAG,CAAChH,MAAMmH;AACf;AAEA,SAASE,gBAAgBtF,MAIxB,EAAE;IACD,OAAO,CAAC4C,SAAgD;QACtD,MAAM,EACJ2C,IAAG,EACHzC,UAAU,EAAEjG,SAAS2B,GAAE,EAAE,CAAA,EACzByB,YAAW,EACZ,GAAGD;QACJ,MAAM,EAAE8E,MAAK,EAAE,GAAGlC;QAElB;;;;;KAKC,GACD,MAAM4C,mBAAmB,IAAM;YAC7B,IAAI,CAACtC,oBAAoBN,SAAS;gBAChC;YACF,CAAC;YAEDpE,GAAGiH,QAAQ,CAACC,UAAU,CAACC,OAAO,CAAC/C,OAAOI,KAAK,EAAE,CAAC4C,OAAO,IAAI,GAAK;gBAC5D,MAAMC,YAAYlJ,mBAAmBiG,OAAOI,KAAK,CAAC1E,MAAM;gBACxD,IAAIuH,UAAUtH,iBAAiB,KAAK,IAAI,IAAIqH,SAAS,KAAK,EAAE;oBAC1D;gBACF,CAAC;gBAED,IAAI,CAACC,UAAUtH,iBAAiB,IAAIqH,SAAS,IAAI,EAAE;oBACjDC,UAAUtH,iBAAiB,GAAGqH;oBAC9B;gBACF,CAAC;gBAEDC,UAAUtH,iBAAiB,GAAG,IAAIuH,IAAI;uBACjCnE,MAAMC,IAAI,CAACiE,UAAUtH,iBAAiB;uBACtCoD,MAAMC,IAAI,CAACgE;iBACf;YACH;QACF;QAEA;;;;KAIC,GACD,MAAMG,uBAAuB,CAACC,OAAc;YAC1C,IAAI,CAAC9C,oBAAoBN,SAAS;gBAChC;YACF,CAAC;YAED,MAAM,EAAEqD,gBAAe,EAAE,GAAGzH,GAAG0H,YAAY;YAC3C,MAAMC,OAAO,IAAIF,gBACf,sCACAD,KAAKI,KAAK,CAAC,EAAE;YAEfD,KAAKzD,GAAG,GAAGsD,KAAKtD,GAAG;YACnBE,OAAOI,KAAK,CAAC1E,MAAM,CAAC+H,2BAA2B,CAACF;YAChD,MAAMG,OAAO,IAAIL,gBAAgB,MAAMD,KAAKI,KAAK,CAAC,EAAE;YACpDE,KAAK5D,GAAG,GAAGsD,KAAKtD,GAAG;YACnBE,OAAOI,KAAK,CAAC1E,MAAM,CAAC+H,2BAA2B,CAACC;YAEhDd;YACA,OAAO,IAAI;QACb;QAEA;;;;KAIC,GACD,MAAMe,kCAAkC,CAACP,OAAc;YACrD,IAAI,CAAC9C,oBAAoBN,SAAS;gBAChC;YACF,CAAC;YAED,MAAM,EAAEqD,gBAAe,EAAE,GAAGzH,GAAG0H,YAAY;YAC3C,MAAMC,OAAO,IAAIF,gBACf,qDACAD,KAAKI,KAAK,CAAC,EAAE;YAEfD,KAAKzD,GAAG,GAAGsD,KAAKtD,GAAG;YACnBE,OAAOI,KAAK,CAAC1E,MAAM,CAAC+H,2BAA2B,CAACF;YAChD,MAAMG,OAAO,IAAIL,gBAAgB,MAAMD,KAAKI,KAAK,CAAC,EAAE;YACpDE,KAAK5D,GAAG,GAAGsD,KAAKtD,GAAG;YACnBE,OAAOI,KAAK,CAAC1E,MAAM,CAAC+H,2BAA2B,CAACC;YAEhDd;QACF;QAEA;;;;;;;;KAQC,GACD,MAAMgB,sCAAsC,CAACR,OAAc;YACzD,IAAI,CAAC9C,oBAAoBN,SAAS;gBAChC;YACF,CAAC;YAED,IAAI2C,KAAK;gBACP,MAAM,EAAEU,gBAAe,EAAE,GAAGzH,GAAG0H,YAAY;gBAC3C,MAAMC,OAAO,IAAIF,gBACf,yDACAD,KAAKI,KAAK,CAAC,EAAE;gBAEfD,KAAKzD,GAAG,GAAGsD,KAAKtD,GAAG;gBACnBE,OAAOI,KAAK,CAAC1E,MAAM,CAAC+H,2BAA2B,CAACF;gBAChD,MAAMG,OAAO,IAAIL,gBAAgB,MAAMD,KAAKI,KAAK,CAAC,EAAE;gBACpDE,KAAK5D,GAAG,GAAGsD,KAAKtD,GAAG;gBACnBE,OAAOI,KAAK,CAAC1E,MAAM,CAAC+H,2BAA2B,CAACC;YAClD,CAAC;QACH;QAEA;;;KAGC,GACD,MAAMG,gBAAgB,CAACC,aAAuB;YAC5C,MAAMb,YAAYlJ,mBAAmBiG,OAAOI,KAAK,CAAC1E,MAAM;YACxD,IAAIuH,UAAUc,eAAe,KAAKC,WAAW;gBAC3Cf,UAAUc,eAAe,GAAG,IAAIb;YAClC,CAAC;YAEDD,UAAUc,eAAe,CAACE,GAAG,CAACH;QAChC;QAEA;;;KAGC,GACD,MAAMI,wBAAwB,CAACC,GAAYC,UAAsB;YAC/D,IAAIA,QAAQC,MAAM,IAAI,KAAKD,OAAO,CAAC,EAAE,KAAK,OAAO;gBAC/CP,cAAcO,OAAO,CAAC,EAAE;gBACxB,IAAI,CAAC9D,oBAAoBN,SAAS;oBAChC,OAAO,IAAI;gBACb,CAAC;YACH,CAAC;QACH;QAEA;;KAEC,GACD,MAAMsE,eAAe,CAACtC,OAAc;gBACCA;YAAnC,IAAI1B,oBAAoBN,WAAWgC,CAAAA,CAAAA,eAAAA,KAAKuC,MAAM,YAAXvC,KAAAA,IAAAA,aAAanB,KAAK,AAAD,KAAKmB,CAAAA,eAAAA,KAAAA,IAAAA,KAAMlC,GAAG,AAAD,GAAG;oBAO3CkC;gBANvB,MAAM,EAAEtG,OAAM,EAAE6I,OAAM,EAAE,GAAGvE,OAAOI,KAAK;gBACvC,MAAM6C,YAAYlJ,mBAAmB2B;gBACrC,IAAI,CAACuH,UAAUuB,eAAe,EAAE;oBAC9BvB,UAAUuB,eAAe,GAAG,IAAIC;gBAClC,CAAC;gBAED,MAAMC,iBAAiB1C,CAAAA,qBAAAA,KAAKuC,MAAM,CAAC1D,KAAK,YAAjBmB,KAAAA,IAAAA,mBAAmB2C;gBAC1C1B,UAAUuB,eAAe,CAACI,GAAG,CAACF,gBAAgB;oBAC5CG,gBAAgB;wBACd,GAAG7C,KAAKlC,GAAG,CAAC6B,KAAK;wBACjB4C,QAAQ7I,OAAOoJ,UAAU;oBAC3B;oBACAC,eAAeR,OAAOI,QAAQ;gBAChC;gBAEA,IAAI,CAAChC,OAAO7B,eAAe4D,iBAAiB;oBAC1CrH,YAAY4E,QAAQ,CAACvF,IAAI,CACvBkD,kBAAkB;wBAChBC,SAAS,CAAC,6BAA6B,EAAE6E,eAAe,UAAU,EAAE1C,KAAKlC,GAAG,CAAC6B,KAAK,CAACC,IAAI,CAAC;wEAC9B,CAAC;wBAC3DvE;wBACA2C;wBACA,GAAGgC,IAAI;oBACT;gBAEJ,CAAC;YACH,CAAC;QACH;QAEA;;;KAGC,GACD,MAAMgD,OAAO,IAAO1E,oBAAoBN,UAAU,IAAI,GAAGgE,SAAS;QAElE,KAAK,MAAMiB,UAAU;YAAC;YAAI;SAAU,CAAE;YACpC/C,MAAMJ,UAAU,CAACM,GAAG,CAAC,CAAC,EAAE6C,OAAO,kBAAkB,CAAC,EAAE5C,GAAG,CAAChH,MAAM2J;YAC9D9C,MAAMJ,UAAU,CAACM,GAAG,CAAC,CAAC,EAAE6C,OAAO,aAAa,CAAC,EAAE5C,GAAG,CAAChH,MAAM2J;YACzD9C,MAAMC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE6C,OAAO,IAAI,CAAC,EAAE5C,GAAG,CAAChH,MAAM8H;YAC1CjB,MAAMC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE6C,OAAO,QAAQ,CAAC,EAAE5C,GAAG,CAAChH,MAAM8H;YAC9CjB,MAAMgD,GAAG,CAAC9C,GAAG,CAAC,CAAC,EAAE6C,OAAO,QAAQ,CAAC,EAAE5C,GAAG,CAAChH,MAAM8H;YAC7CjB,MAAMC,IAAI,CACPC,GAAG,CAAC,CAAC,EAAE6C,OAAO,mBAAmB,CAAC,EAClC5C,GAAG,CAAChH,MAAMsI;YACbzB,MAAMC,IAAI,CACPC,GAAG,CAAC,CAAC,EAAE6C,OAAO,uBAAuB,CAAC,EACtC5C,GAAG,CAAChH,MAAMuI;QACf;QAEA1B,MAAMI,eAAe,CAACF,GAAG,CAAC,WAAWC,GAAG,CAAChH,MAAM6I;QAC/ChC,MAAMK,qBAAqB,CAACH,GAAG,CAAC,WAAWC,GAAG,CAAChH,MAAM6I;QACrDhC,MAAMiD,UAAU,CAAC9C,GAAG,CAAChH,MAAMiJ;QAC3BpC,MAAMkD,MAAM,CAAC/C,GAAG,CAAChH,MAAMiJ;QAEvB;;;;;;KAMC,GACDpC,MAAMmD,UAAU,CAAChD,GAAG,CAAChH,MAAM,CAACgK,aAAe;gBAEvCA,kBAEAA;YAHF,IACEA,CAAAA,CAAAA,mBAAAA,WAAWC,IAAI,YAAfD,KAAAA,IAAAA,iBAAiB1E,IAAI,AAAD,MAAM,sBAC1BH,6BAA6B6E,WAAWC,IAAI,KAC5CD,CAAAA,CAAAA,iBAAAA,WAAWE,EAAE,YAAbF,KAAAA,IAAAA,eAAe1E,IAAI,AAAD,MAAM,iBACxB;gBACA,KAAK,MAAMC,YAAYyE,WAAWE,EAAE,CAACC,UAAU,CAAE;oBAC/C,IAAI5E,SAASD,IAAI,KAAK,eAAe,QAAQ;oBAC7C,IACEC,SAAS6E,GAAG,CAAC9E,IAAI,KAAK,aACtB,OAAOC,SAAS6E,GAAG,CAAC5E,KAAK,KAAK,UAC9B;wBACAgD,cAAcjD,SAAS6E,GAAG,CAAC5E,KAAK;oBAClC,OAAO,IAAID,SAAS6E,GAAG,CAAC9E,IAAI,KAAK,cAAc;wBAC7CkD,cAAcjD,SAAS6E,GAAG,CAACxH,IAAI;oBACjC,CAAC;gBACH;gBAEA,IAAI,CAACqC,oBAAoBN,SAAS;oBAChC,OAAO,IAAI;gBACb,CAAC;YACH,CAAC;QACH;QACA,IAAI,CAAC2C,KAAK;YACR,8EAA8E;YAC9Ed,4BAA4B7B,QAAQ3C;QACtC,CAAC;IACH;AACF;AAEA,eAAeqI,4BACbC,eAAoB,EACpBC,QAA0B,EAC1B;QACID;IAAJ,IAAIA,0BAAAA,KAAAA,IAAAA,CAAAA,2BAAAA,gBAAiBE,OAAO,YAAxBF,KAAAA,IAAAA,yBAA0B7I,WAAW,UAAU;QACjD,MAAMgJ,mBACJ,IAAIC,IAAIJ,gBAAgBE,OAAO,EAAE,sBAAsBG,YAAY,CAAC9H,GAAG,CACrE,uBACG;QACP,MAAM+H,eAAe,MAAM,IAAIC,QAAQ,CAACC,UACtCP,SAASO,OAAO,CAAC,CAAC,GAAG,KAAKL,kBAAkB,CAAC,GAAG,CAACM,KAAKC,OACpDF,QAAQC,OAAOC;QAGnB,IAAI,OAAOJ,iBAAiB,UAAU;YACpC,OAAO;gBACLpJ,MAAMoJ;gBACNK,QAAQ,AACN,CAAA,MAAMvL,kBAAkB;oBACtBwL,YAAY,CAAC;oBACbN;oBACAO,OAAO,KAAK;oBACZC,UAAU;gBACZ,EAAC,EACD/I,UAAU;YACd;QACF,CAAC;IACH,CAAC;AACH;AAEA,SAASgJ,mBAAmBtJ,MAK3B,EAAE;IACD,MAAM,EAAEuF,IAAG,EAAEtF,YAAW,EAAEC,gBAAe,EAAE4C,SAAQ,EAAE,GAAG9C;IACxD,MAAM,EAAEnD,SAAS2B,GAAE,EAAE,GAAGsE;IACxB,OAAO,UAAY;QACjB5C,gBAAgBqJ,KAAK;QACrB,MAAMf,WAAWvI,YAAYuJ,eAAe,CAAC1I,GAAG,CAAC;QACjD,MAAM2I,YAAmC7L,aAAakD,GAAG,CAAC;QAE1D,KAAK,MAAM,CAAC4I,WAAWC,MAAM,IAAI1J,YAAY2J,OAAO,CAAE;gBAK5BD;YAJxB,IAAIA,MAAME,OAAO,CAACxL,OAAO,KAAKrB,sBAAsB;gBAElD,QAAQ;YACV,CAAC;YACD,MAAMuL,kBAAkBoB,CAAAA,sBAAAA,MAAMzD,YAAY,YAAlByD,KAAAA,IAAAA,mBAAoB,CAAC,EAAE;YAC/C,MAAM1F,qBAAqB,MAAMqE,4BAC/BC,iBACAC;YAEF,MAAM,EAAEtE,QAAO,EAAE4F,MAAK,EAAE,GAAGnN,mBACzBsD,YAAY7B,WAAW,CAAC2L,iBAAiB,CAACxB;YAG5C,MAAM,EAAEnK,YAAW,EAAE,GAAG6B;YACxB,MAAM+J,UAAU,IAAIlE;YACpB,MAAMmE,2BAA2B,CAACC,aAAoB;gBACpD,MAAM5L,SAASF,YAAY+L,SAAS,CAACD;gBACrC,IAAI5L,QAAQ;oBACV0L,QAAQnD,GAAG,CAACvI;gBACd,CAAC;YACH;YAEAqL,MAAMzD,YAAY,CAACkE,OAAO,CAACH;YAC3BN,MAAMU,mBAAmB,CAACD,OAAO,CAACH;YAElC,MAAMK,gBAA+B;gBACnC5I,KAAK,IAAIoE;gBACT/D,cAAc,IAAIsF;gBAClBpF,eAAe,IAAIoF;YACrB;YACA,IAAIkD,yBAAyB;YAE7B,KAAK,MAAMjM,UAAU0L,QAAS;oBA4ExB/F;gBA3EJ,MAAM4B,YAAYlJ,mBAAmB2B;gBAErC;;SAEC,GACD,IAAI,CAACiH,KAAK;oBACR,MAAMiF,WAAWlM,OAAOkM,QAAQ;oBAChC,MAAMC,uBACJD,YACA,6JAA6JE,IAAI,CAC/JF;oBAGJ,IAAIC,sBAAsB;wBACxBF;oBACF,CAAC;gBACH,CAAC;gBAED;;;;SAIC,GACD,IACE,CAAChF,OACDM,UAAUtH,iBAAiB,IAC3BL,oCAAoC;oBAClCI;oBACAF;oBACAC,SAASG,GAAGmM,IAAI,CAACtM,OAAO,CAACuM,eAAe,CAAC3K,aAAayJ;oBACtDnL,mBAAmBsH,UAAUtH,iBAAiB;oBAC9CC;gBACF,IACA;wBAMIyF;oBALJ,MAAMkE,KAAK7J,OAAOoJ,UAAU;oBAC5B,IAAI,uDAAuDgD,IAAI,CAACvC,KAAK;wBACnE,QAAQ;oBACV,CAAC;oBAED,IAAIlE,6BAAAA,KAAAA,IAAAA,CAAAA,8BAAAA,mBAAoBiF,MAAM,YAA1BjF,KAAAA,IAAAA,4BAA4BE,0BAAF,EAA8B;wBAC1DsF,oBAAAA,KAAAA,IAAAA,UAAWoB,MAAM,CAAC;4BAChBC,WAAW;4BACXC,SAAS;gCACP,GAAG9G,kBAAkB;gCACrBxE,MAAMwE,mBAAmBxE,IAAI,CAACI,OAAO,CAACqE,WAAW,IAAI;gCACrD8G,qBAAqB1M,OAAO2M,WAAW,CAACpL,OAAO,CAC7CqE,WAAW,IACX;4BAEJ;wBACF;oBACF,CAAC;oBACD,IACE,CAACH,+BACCzF,OAAO2M,WAAW,EAClBhH,6BAAAA,KAAAA,IAAAA,mBAAoBiF,MAAM,EAC1BhF,UAEF;wBACAjE,YAAYiL,MAAM,CAAC5L,IAAI,CACrBkD,kBAAkB;4BAChBC,SAAS,CAAC,0GAA0G,EAClH,OAAOoD,UAAUtH,iBAAiB,KAAK,YACnC,CAAC,UAAU,EAAEoD,MAAMC,IAAI,CAACiE,UAAUtH,iBAAiB,EAAE4M,IAAI,CACvD,MACA,CAAC,GACH,EAAE,CACP,2EAA2E,CAAC;4BAC7ExI,aAAarE;4BACb2B;wBACF;oBAEJ,CAAC;gBACH,CAAC;gBAED,IAAIgE,6BAAAA,KAAAA,IAAAA,CAAAA,6BAAAA,mBAAoBiF,MAAM,YAA1BjF,KAAAA,IAAAA,2BAA4B/B,OAAF,EAAW;oBACvCoI,cAAcpI,OAAO,GAAG+B,mBAAmBiF,MAAM,CAAChH,OAAO;gBAC3D,CAAC;gBAED,IAAI4H,gBAAAA,KAAAA,IAAAA,MAAOsB,eAAe,EAAE;oBAC1B,MAAMA,kBAAkBtB,MAAMsB,eAAe;oBAC7Cd,cAAcpI,OAAO,GACnB,8DAA8D;oBAC9D,OAAOkJ,oBAAoB,WACvB;wBAACA;qBAAgB,GACjBA,eAAe;gBACvB,CAAC;gBAED;;;SAGC,GACD,IAAIvF,oBAAAA,KAAAA,IAAAA,UAAWwF,WAAW,EAAE;oBAC1Bf,cAAclL,OAAO,GAAGyG,UAAUwF,WAAW;gBAC/C,OAAO,IAAIxF,oBAAAA,KAAAA,IAAAA,UAAWyF,kBAAkB,EAAE;oBACxChB,cAActJ,cAAc,GAAG6E,UAAUyF,kBAAkB;gBAC7D,OAAO,IAAIzF,oBAAAA,KAAAA,IAAAA,UAAW0F,mBAAmB,EAAE;oBACzCjB,cAAcrJ,eAAe,GAAG4E,UAAU0F,mBAAmB;gBAC/D,CAAC;gBAED;;;SAGC,GACD,IAAI1F,CAAAA,oBAAAA,KAAAA,IAAAA,UAAWc,eAAe,AAAD,MAAMC,WAAW;oBAC5C,KAAK,MAAM4E,WAAW3F,UAAUc,eAAe,CAAE;wBAC/C2D,cAAc5I,GAAG,CAACmF,GAAG,CAAC2E;oBACxB;gBACF,CAAC;gBAED;;;SAGC,GACD,IAAI3F,oBAAAA,KAAAA,IAAAA,UAAW4F,yBAAyB,EAAE;oBACxCnB,cAAcvI,YAAY,CAACyF,GAAG,CAC5B3B,UAAU4F,yBAAyB,CAAC5K,IAAI,EACxCgF,UAAU4F,yBAAyB,CAACzJ,QAAQ;gBAEhD,CAAC;gBAED,IAAI6D,oBAAAA,KAAAA,IAAAA,UAAW6F,0BAA0B,EAAE;oBACzCpB,cAAcrI,aAAa,CAACuF,GAAG,CAC7B3B,UAAU6F,0BAA0B,CAAC7K,IAAI,EACzCgF,UAAU6F,0BAA0B,CAAC1J,QAAQ;gBAEjD,CAAC;gBAED;;;SAGC,GACD,KAAK,MAAM2J,QAAQvN,YAAYwN,sBAAsB,CAACtN,QAAS;oBAC7D,IAAIqN,KAAKrN,MAAM,EAAE;wBACf0L,QAAQnD,GAAG,CAAC8E,KAAKrN,MAAM;oBACzB,CAAC;gBACH;YACF;YAEAmL,oBAAAA,KAAAA,IAAAA,UAAWoB,MAAM,CAAC;gBAChBC,WAAWjN;gBACXkN,SAAS;oBACPc,aAAa;oBACbC,iBAAiBvB;gBACnB;YACF;YACArK,gBAAgBsH,GAAG,CAACkC,WAAWY;QACjC;IACF;AACF;AACA,eAAe,MAAMyB;IAInBC,YAAY,EAAEzG,IAAG,EAAEhG,WAAU,EAAyC,CAAE;QACtE,IAAI,CAACgG,GAAG,GAAGA;QACX,IAAI,CAAChG,UAAU,GAAGA;IACpB;IAEO0M,MAAMnJ,QAA0B,EAAE;QACvCA,SAASgC,KAAK,CAAC7E,WAAW,CAACgF,GAAG,CAAChH,MAAM,CAACgC,aAAaD,SAAW;YAC5D,MAAM,EAAE8E,MAAK,EAAE,GAAG9E,OAAOkM,mBAAmB;YAC5C;;OAEC,GACD,MAAMC,eAAe7G,gBAAgB;gBACnCC,KAAK,IAAI,CAACA,GAAG;gBACbzC;gBACA7C;YACF;YACA6E,MAAMlC,MAAM,CAACoC,GAAG,CAAC,mBAAmBC,GAAG,CAAChH,MAAMkO;YAC9CrH,MAAMlC,MAAM,CAACoC,GAAG,CAAC,sBAAsBC,GAAG,CAAChH,MAAMkO;YACjDrH,MAAMlC,MAAM,CAACoC,GAAG,CAAC,kBAAkBC,GAAG,CAAChH,MAAMkO;YAE7C;;OAEC,GACD,MAAMjM,kBAAkB,IAAImH;YAC5BpH,YAAY6E,KAAK,CAACsH,aAAa,CAACC,UAAU,CACxCpO,MACAqL,mBAAmB;gBACjBrJ;gBACA6C;gBACAyC,KAAK,IAAI,CAACA,GAAG;gBACbrF;YACF;YAGF;;OAEC,GACDD,YAAY6E,KAAK,CAACwH,aAAa,CAACrH,GAAG,CACjC;gBACEpE,MAAM;gBACN0L,OAAO1P,QAAQ2P,WAAW,CAACC,8BAA8B;YAC3D,GACA1M,gBAAgB;gBACdE;gBACAC;gBACAhB,MAAM;oBACJK,YAAY,IAAI,CAACA,UAAU;gBAC7B;YACF;QAEJ;IACF;AACF,CAAC;AAED,OAAO,MAAMmN,2BAA2B;IACtC;IACA;IACA;IACA;IACA;CACD,CAAS;AAEV,MAAMC,yBAAyB,IAAI7G,IAAY4G;AAE/C,OAAO,SAASE,2BAA2B;IACzC,MAAMC,UAAkC,CAAC;IACzC,KAAK,MAAMC,OAAOJ,yBAA0B;QAC1CG,OAAO,CAACC,IAAI,GAAG,CAAC,cAAc,EAAEA,IAAI,CAAC;QACrCD,OAAO,CAAC,CAAC,KAAK,EAAEC,IAAI,CAAC,CAAC,GAAG,CAAC,cAAc,EAAEA,IAAI,CAAC;IACjD;IACA,OAAOD;AACT,CAAC;AAED,OAAO,eAAeE,oCAAoC,EACxDtE,QAAO,EACPuE,QAAO,EACPC,YAAW,EACXC,WAAU,EAMX,EAAE;IACD,IACED,YAAYE,WAAW,KAAK,gBAC5BzJ,eAAe+E,YACf,CAACkE,uBAAuBS,GAAG,CAAC3E,UAC5B;QACA,wEAAwE;QACxE,IAAI;YACF,MAAMyE,aAAaF,SAASvE;QAC9B,EAAE,OAAM;YACN,OAAO,CAAC,uCAAuC,EAAEA,QAAQ,EAAE,CAAC;QAC9D;IACF,CAAC;AACH,CAAC"}